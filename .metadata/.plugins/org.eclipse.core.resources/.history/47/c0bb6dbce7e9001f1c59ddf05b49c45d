document.addEventListener("DOMContentLoaded", function() {
	
	//API de Itunes para las portadas:
	let titulo = document.getElementById("tituloCancion").textContent;
	let artista = document.getElementById("artistaNombre").textContent;
	let imgPortada = document.getElementById("portadaCancion");
	
	let enlace = `https://itunes.apple.com/search?term=${encodeURIComponent(artista + " " + titulo)}&entity=song&limit=1`;
	
	fetch(enlace)
		.then(respuesta => respuesta.json())
		.then(dato => {
			if(dato.results.length > 0) {
				imgPortada.src = dato.results[0].artworkUrl100.replace("100x100", "200x200");	
			}
		})
		.catch(error => console.log("Error al cargar la portada", error));
		
	//Confirmar la eliminación:
	const formsEliminar = document.querySelectorAll(".formEliminar");
	formsEliminar.forEach(form => {
		form.addEventListener("submit", function (event) {
			const confirmar = confirm("¿Estás segur@ de querer eliminar esta canción?");
				if(!confirmar) {
					event.preventDefault();
			}
		})
	})
	
	//Imagen de Artista:
	
	let artistaElement = document.getElementById("artistaNombre");
	    
	    if (!artistaElement) {
	        console.error("No se encontró el elemento con ID 'artistaNombre'. Verifica el HTML.");
	        return;
	    }

	    let artistaOtro = artistaElement.textContent.trim();
	    console.log("Artista detectado:", artista);
	    
	let imgArtista = document.getElementById("fotoArtista");
	
	let enlaceArtista = `https://itunes.apple.com/search?term=${encodeURIComponent(artistaOtro)}&entity=musicArtist&limit=1`;
	console.log("Enlace API:", enlaceArtista);
	
	fetch(enlaceArtista)
	.then(respuesta => respuesta.json())
	.then(dato => {
		console.log(dato); 
		if(dato.results.length > 0) {
			imgArtista.src = dato.results[0].artworkUrl100.replace("100x100", "300x300");
			console.log("Imagen de artista encontrada y cargada.");
		} else {
			console.log("No se encontraron imágenes para el artista:", artista);
		}
	})
	.catch(error => console.log("Error al cargar la imagen", error));
});